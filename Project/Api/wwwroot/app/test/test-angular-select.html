<section class="pageContainer" ng-controller="testAngularSelectorController as vm">
    <div class="abovePagePanels"><h1> Angular Selector Test</h1></div>
    <div class="pagePanelContainer"><div class="pagePanel">

        <div class="row">
            <div class="col-xs-12">
                <p>
                    This a sample <strong>angular selector</strong> page.
                    It uses out-of the box library directives.
                </p>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12">
                <!-- be careful with DOM here : it is an expensive operation -->
                <ui-select multiple
                           ng-model="vm.Recipients"
                           theme="app/lib/ui/angular-ui-select/bootstrap"
                           tagging="vm.tagTransform" tagging-tokens="ENTER|SPACE|,"
                           on-select="vm.onSelectCallback($item, $model)"
                           ng-disabled="vm.isDisabled" close-on-select="false" title="Enter email address" style="width: 80%;">
                    <ui-select-match placeholder="Recipients email address..."> {{$item.EmailAddress}} </ui-select-match>
                    <ui-select-choices repeat="person.Email as person in vm.contacts | filter: { Email: $select.search }  | limitTo: 20">
                        <div ng-bind-html="person.Name | highlight: $select.search"></div>
                        <small ng-bind="'email: ' + person.EmailAddress "></small>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>

        <style> .debug p { padding: 10px 0; } </style>
        <div class="row">
            <div class="col-xs-12">
                <div class="alert alert-warning debug" style="margin: 33px 0;">

                    <h3> Debug </h3>
                    <p> To: </p> <pre> Recipients - {{vm.Recipients}} </pre> <br>
                    <p> vm.dto.ToEmails : </p> <pre> {{vm.dto.ToEmails | json}} </pre> <br>

                    <p> vm.found : </p> <pre> {{vm.found | json}} </pre> <br>
                    <p> vm.eventResult : </p> <pre> {{vm.eventResult | json}} </pre> <br>

                    <p> Contacts data (server) : </p> <pre> {{vm.contacts | json}} </pre> <br>
                    <p> Contacts list (client - lookup array) : </p> <pre> {{vm.contactList | json}} </pre> <br>
                </div>
            </div>
        </div>
        
</div></div></section>