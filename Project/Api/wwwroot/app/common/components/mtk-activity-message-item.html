<div class="feed-entry" >
    <div class="feed-entry-row" >
        <div class="feed-entry-col-user">
            <div ng-if="vm.dto.AssignedTo">
                <mtk-member-avatar member-name="vm.dto.AssignedTo" member-id="vm.dto.MemberId"></mtk-member-avatar>
            </div>
            <div ng-if="!vm.dto.AssignedTo">
                <div class="user-initial-badge" data-original-title="from portfolio" mtk-tooltip>
                    <i class="icon-group "></i>
                </div>
            </div>
        </div>

        <div class="feed-entry-col-body" ng-click="vm.preview()" ng-class="{ 'open': !vm.isMessageThread() }">
            <div class="feed-entry-title">

                <div class="clearfix">
                    <div class="pull-left padding-bottom-4">
                        <i class="{{vm.icon}} icon-large"></i>

                        <a ng-href="{{vm.url}}" target="{{vm.linkTarget}}" ng-if="vm.isMessageThread()" class="DarkGrey">
                            <span ng-if="vm.dto.Subject">  {{vm.dto.Subject | cut:true:30:'...'}} </span>
                        </a>
                        <span ng-if="!vm.isMessageThread()">
                            <span ng-if="vm.dto.Subject">  {{vm.dto.Subject | cut:true:30:'...'}} </span>
                            <span ng-if="!vm.dto.Subject && vm.dto.MessageScheduleName"> {{vm.dto.MessageScheduleName | cut:true:30:'...'}} </span>
                            <span ng-if="!vm.dto.Subject && !vm.dto.MessageScheduleName"> {{vm.dto.Detail | cut:true:30:'...'}} </span>
                        </span>
                    </div>
                    <div class="pull-right hidden-xs">
                        <span ng-if="vm.dto.NextActionDueDate && !vm.dto.CompletedOn"
                              ng-class="vm.dueDateClass()">
                            <i class="icon-calendar-empty "></i>
                            <time>{{vm.dto.NextActionDueDate | date:'shortDate' }}</time>
                        </span>
                        <span ng-if="vm.dto.CompletedOn">
                            <i class="icon-calendar-empty "></i>
                            <time>{{vm.dto.CompletedOn | date:'shortDate' }}</time>
                        </span>
                    </div>
                </div>
            </div>

            <div ng-if="!vm.isMessageThread()">
               To {{vm.dto.ContactReference}}
            </div>

            <div class="clearfix mgt-8">
                <div class="pull-left text-muted small mgt-3" ng-if="vm.showProperty">
                  {{vm.dto.LotReference}}
                </div>
                <div class="pull-right hidden-xs">
                    <span class="label label-warning">{{vm.warning}}</span>
                </div>
            </div>

        </div>
    </div>
</div>